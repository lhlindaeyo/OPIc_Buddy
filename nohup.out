
  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://10.20.129.191:8501


  You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8503
  Network URL: http://10.20.129.191:8503

MongoDB 연결 성공 (컬렉션: opic_samples)
MongoDB 연결 성공 (컬렉션: opic_samples)
MongoDB 연결 성공 (컬렉션: opic_samples)
MongoDB 연결 성공 (컬렉션: opic_samples)
MongoDB 연결 성공 (컬렉션: opic_samples)
[31m──[0m[31m────────────────────────[0m[31m [0m[1;31mTraceback [0m[1;2;31m(most recent call last)[0m[31m [0m[31m─────────────────────────[0m[31m──[0m
[31m [0m [2;33m/Users/ohseohyeon/OPIc_Buddy_front/app/utils/[0m[1;33mvoice_utils.py[0m:[94m30[0m in [92mtext_to_speech[0m     [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m 27 [0m[2m│   │   [0m                                                                       [31m [0m
[31m [0m   [2m 28 [0m[2m│   │   [0m[2m# 1) 신규 엔드포인트 (권장)[0m                                            [31m [0m
[31m [0m   [2m 29 [0m[2m│   │   [0m[94mtry[0m:                                                                   [31m [0m
[31m [0m [31m❱ [0m 30 [2m│   │   │   [0m[94mwith[0m [96mself[0m.client.audio.speech.with_streaming_response.create(      [31m [0m
[31m [0m   [2m 31 [0m[2m│   │   │   │   [0mmodel=[33m"[0m[33mgpt-4o-mini-tts[0m[33m"[0m,   [2m# 최신 TTS[0m                          [31m [0m
[31m [0m   [2m 32 [0m[2m│   │   │   │   [0mvoice=[96mself[0m.voice,                                              [31m [0m
[31m [0m   [2m 33 [0m[2m│   │   │   │   [0m[96minput[0m=text.strip(),                                            [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/Users/ohseohyeon/anaconda3/lib/python3.11/site-packages/openai/[0m[1;33m_response.py[0m:[94m626[0m in  [31m [0m
[31m [0m [92m__enter__[0m                                                                            [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m623 [0m[2m│   │   [0m[96mself[0m.__response: _APIResponseT | [94mNone[0m = [94mNone[0m                           [31m [0m
[31m [0m   [2m624 [0m[2m│   [0m                                                                           [31m [0m
[31m [0m   [2m625 [0m[2m│   [0m[94mdef[0m [92m__enter__[0m([96mself[0m) -> _APIResponseT:                                      [31m [0m
[31m [0m [31m❱ [0m626 [2m│   │   [0m[96mself[0m.__response = [1;4;96mself[0m[1;4m._request_func()[0m                                 [31m [0m
[31m [0m   [2m627 [0m[2m│   │   [0m[94mreturn[0m [96mself[0m.__response                                                 [31m [0m
[31m [0m   [2m628 [0m[2m│   [0m                                                                           [31m [0m
[31m [0m   [2m629 [0m[2m│   [0m[94mdef[0m [92m__exit__[0m(                                                              [31m [0m
[31m────────────────────────────────────────────────────────────────────────────────────────[0m
[1;91mTypeError: [0m[1;35mSpeech.create[0m[1m([0m[1m)[0m got an unexpected keyword argument [32m'format'[0m

[3mDuring handling of the above exception, another exception occurred:[0m

[31m──[0m[31m────────────────────────[0m[31m [0m[1;31mTraceback [0m[1;2;31m(most recent call last)[0m[31m [0m[31m─────────────────────────[0m[31m──[0m
[31m [0m [2;33m/Users/ohseohyeon/OPIc_Buddy_front/app/utils/[0m[1;33mvoice_utils.py[0m:[94m42[0m in [92mtext_to_speech[0m     [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m 39 [0m[2m│   │   [0m[94mexcept[0m [96mException[0m [94mas[0m e1:                                                [31m [0m
[31m [0m   [2m 40 [0m[2m│   │   │   [0m[2m# 2) 구버전 호환(일부 리전에선 tts-1만 열려있을 수 있음)[0m           [31m [0m
[31m [0m   [2m 41 [0m[2m│   │   │   [0m[94mtry[0m:                                                               [31m [0m
[31m [0m [31m❱ [0m 42 [2m│   │   │   │   [0mresp = [96mself[0m.client.audio.speech.create(                        [31m [0m
[31m [0m   [2m 43 [0m[2m│   │   │   │   │   [0mmodel=[33m"[0m[33mtts-1[0m[33m"[0m,                                             [31m [0m
[31m [0m   [2m 44 [0m[2m│   │   │   │   │   [0mvoice=[96mself[0m.voice,                                          [31m [0m
[31m [0m   [2m 45 [0m[2m│   │   │   │   │   [0m[96minput[0m=text.strip(),                                        [31m [0m
[31m────────────────────────────────────────────────────────────────────────────────────────[0m
[1;91mTypeError: [0m[1;35mSpeech.create[0m[1m([0m[1m)[0m got an unexpected keyword argument [32m'format'[0m

[3mDuring handling of the above exception, another exception occurred:[0m

[31m──[0m[31m────────────────────────[0m[31m [0m[1;31mTraceback [0m[1;2;31m(most recent call last)[0m[31m [0m[31m─────────────────────────[0m[31m──[0m
[31m [0m [2;33m/Users/ohseohyeon/anaconda3/lib/python3.11/site-packages/streamlit/runtime/scriptrun[0m [31m [0m
[31m [0m [2;33mner/[0m[1;33mexec_code.py[0m:[94m128[0m in [92mexec_func_with_error_handling[0m                                [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/Users/ohseohyeon/anaconda3/lib/python3.11/site-packages/streamlit/runtime/scriptrun[0m [31m [0m
[31m [0m [2;33mner/[0m[1;33mscript_runner.py[0m:[94m669[0m in [92mcode_to_exec[0m                                             [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/Users/ohseohyeon/OPIc_Buddy_front/app/[0m[1;33mmain.py[0m:[94m63[0m in [92m<module>[0m                        [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m60 [0m[2m│   │   [0mshow_intro()                                                            [31m [0m
[31m [0m   [2m61 [0m                                                                                [31m [0m
[31m [0m   [2m62 [0m[94mif[0m [91m__name__[0m == [33m"[0m[33m__main__[0m[33m"[0m:                                                      [31m [0m
[31m [0m [31m❱ [0m63 [2m│   [0m[1;4mmain()[0m                                                                      [31m [0m
[31m [0m   [2m64 [0m                                                                                [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/Users/ohseohyeon/OPIc_Buddy_front/app/[0m[1;33mmain.py[0m:[94m52[0m in [92mmain[0m                            [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m49 [0m[2m│   │   │   [0m[94mwith[0m st.spinner([33m"[0m[33mGenerating OPIc questions...[0m[33m"[0m):                    [31m [0m
[31m [0m   [2m50 [0m[2m│   │   │   │   [0mst.session_state[[33m"[0m[33mexam_questions[0m[33m"[0m] = asyncio.run(exam_mod.creat [31m [0m
[31m [0m   [2m51 [0m[2m│   │   [0m                                                                        [31m [0m
[31m [0m [31m❱ [0m52 [2m│   │   [0m[1;4mexam_mod.show_exam()[0m                                                    [31m [0m
[31m [0m   [2m53 [0m[2m│   [0m                                                                            [31m [0m
[31m [0m   [2m54 [0m[2m│   [0m[94melif[0m stage == [33m"[0m[33mfeedback[0m[33m"[0m:                                                   [31m [0m
[31m [0m   [2m55 [0m[2m│   │   [0m[94mfrom[0m [4;96mcomponents[0m[4;96m.[0m[4;96mfeedback[0m [94mimport[0m show_feedback_page                      [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/Users/ohseohyeon/OPIc_Buddy_front/app/components/[0m[1;33mexam.py[0m:[94m210[0m in [92mshow_exam[0m           [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m207 [0m[2m│   │   [0m[2m# 문제 인덱스가 바뀌면 항상 새로 TTS 생성 (캐시 사용 안함)[0m             [31m [0m
[31m [0m   [2m208 [0m[2m│   │   [0m[94mwith[0m st.spinner([33m"[0m[33m문제 음성 변환 중...[0m[33m"[0m):                               [31m [0m
[31m [0m   [2m209 [0m[2m│   │   │   [0mvoice_manager = VoiceManager()                                     [31m [0m
[31m [0m [31m❱ [0m210 [2m│   │   │   [0maudio_data = [1;4mvoice_manager.text_to_speech(current_question)[0m        [31m [0m
[31m [0m   [2m211 [0m[2m│   │   │   [0mst.session_state[[33m'[0m[33mtts_audio_cache[0m[33m'[0m][tts_key] = audio_data          [31m [0m
[31m [0m   [2m212 [0m[2m│   │   [0m                                                                       [31m [0m
[31m [0m   [2m213 [0m[2m│   │   [0m[94mif[0m audio_data:                                                         [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/Users/ohseohyeon/OPIc_Buddy_front/app/utils/[0m[1;33mvoice_utils.py[0m:[94m52[0m in [92mtext_to_speech[0m     [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m 49 [0m[2m│   │   │   │   [0m[94mreturn[0m resp.read()                                             [31m [0m
[31m [0m   [2m 50 [0m[2m│   │   │   [0m[94mexcept[0m [96mException[0m [94mas[0m e2:                                            [31m [0m
[31m [0m   [2m 51 [0m[2m│   │   │   │   [0m[2m# 최종 에러를 자세히 올려 호출부에서 메시지 표시[0m               [31m [0m
[31m [0m [31m❱ [0m 52 [2m│   │   │   │   [0m[1;4;94mraise[0m[1;4m [0m[1;4;96mRuntimeError[0m[1;4m([0m[1;4;33mf[0m[1;4;33m"[0m[1;4;33mTTS failed: [0m[1;4;33m{[0m[1;4me1[0m[1;4;33m}[0m[1;4;33m | fallback: [0m[1;4;33m{[0m[1;4me2[0m[1;4;33m}[0m[1;4;33m"[0m[1;4m)[0m       [31m [0m
[31m [0m   [2m 53 [0m                                                                               [31m [0m
[31m [0m   [2m 54 [0m[2m# ── 음성/텍스트 통합 입력: 기존 인터페이스 유지용 더미[0m                        [31m [0m
[31m [0m   [2m 55 [0m[94mdef[0m [92munified_answer_input[0m(q_idx: [96mint[0m, question: [96mstr[0m) -> [96mstr[0m:                    [31m [0m
[31m────────────────────────────────────────────────────────────────────────────────────────[0m
[1;91mRuntimeError: [0mTTS failed: [1;35mSpeech.create[0m[1m([0m[1m)[0m got an unexpected keyword argument [32m'format'[0m | 
fallback: [1;35mSpeech.create[0m[1m([0m[1m)[0m got an unexpected keyword argument [32m'format'[0m
[31m──[0m[31m────────────────────────[0m[31m [0m[1;31mTraceback [0m[1;2;31m(most recent call last)[0m[31m [0m[31m─────────────────────────[0m[31m──[0m
[31m [0m [2;33m/Users/ohseohyeon/OPIc_Buddy_front/app/utils/[0m[1;33mvoice_utils.py[0m:[94m30[0m in [92mtext_to_speech[0m     [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m 27 [0m[2m│   │   [0m                                                                       [31m [0m
[31m [0m   [2m 28 [0m[2m│   │   [0m[2m# 1) 신규 엔드포인트 (권장)[0m                                            [31m [0m
[31m [0m   [2m 29 [0m[2m│   │   [0m[94mtry[0m:                                                                   [31m [0m
[31m [0m [31m❱ [0m 30 [2m│   │   │   [0m[94mwith[0m [96mself[0m.client.audio.speech.with_streaming_response.create(      [31m [0m
[31m [0m   [2m 31 [0m[2m│   │   │   │   [0mmodel=[33m"[0m[33mgpt-4o-mini-tts[0m[33m"[0m,   [2m# 최신 TTS[0m                          [31m [0m
[31m [0m   [2m 32 [0m[2m│   │   │   │   [0mvoice=[96mself[0m.voice,                                              [31m [0m
[31m [0m   [2m 33 [0m[2m│   │   │   │   [0m[96minput[0m=text.strip(),                                            [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/Users/ohseohyeon/anaconda3/lib/python3.11/site-packages/openai/[0m[1;33m_response.py[0m:[94m626[0m in  [31m [0m
[31m [0m [92m__enter__[0m                                                                            [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m623 [0m[2m│   │   [0m[96mself[0m.__response: _APIResponseT | [94mNone[0m = [94mNone[0m                           [31m [0m
[31m [0m   [2m624 [0m[2m│   [0m                                                                           [31m [0m
[31m [0m   [2m625 [0m[2m│   [0m[94mdef[0m [92m__enter__[0m([96mself[0m) -> _APIResponseT:                                      [31m [0m
[31m [0m [31m❱ [0m626 [2m│   │   [0m[96mself[0m.__response = [1;4;96mself[0m[1;4m._request_func()[0m                                 [31m [0m
[31m [0m   [2m627 [0m[2m│   │   [0m[94mreturn[0m [96mself[0m.__response                                                 [31m [0m
[31m [0m   [2m628 [0m[2m│   [0m                                                                           [31m [0m
[31m [0m   [2m629 [0m[2m│   [0m[94mdef[0m [92m__exit__[0m(                                                              [31m [0m
[31m────────────────────────────────────────────────────────────────────────────────────────[0m
[1;91mTypeError: [0m[1;35mSpeech.create[0m[1m([0m[1m)[0m got an unexpected keyword argument [32m'format'[0m

[3mDuring handling of the above exception, another exception occurred:[0m

[31m──[0m[31m────────────────────────[0m[31m [0m[1;31mTraceback [0m[1;2;31m(most recent call last)[0m[31m [0m[31m─────────────────────────[0m[31m──[0m
[31m [0m [2;33m/Users/ohseohyeon/OPIc_Buddy_front/app/utils/[0m[1;33mvoice_utils.py[0m:[94m42[0m in [92mtext_to_speech[0m     [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m 39 [0m[2m│   │   [0m[94mexcept[0m [96mException[0m [94mas[0m e1:                                                [31m [0m
[31m [0m   [2m 40 [0m[2m│   │   │   [0m[2m# 2) 구버전 호환(일부 리전에선 tts-1만 열려있을 수 있음)[0m           [31m [0m
[31m [0m   [2m 41 [0m[2m│   │   │   [0m[94mtry[0m:                                                               [31m [0m
[31m [0m [31m❱ [0m 42 [2m│   │   │   │   [0mresp = [96mself[0m.client.audio.speech.create(                        [31m [0m
[31m [0m   [2m 43 [0m[2m│   │   │   │   │   [0mmodel=[33m"[0m[33mtts-1[0m[33m"[0m,                                             [31m [0m
[31m [0m   [2m 44 [0m[2m│   │   │   │   │   [0mvoice=[96mself[0m.voice,                                          [31m [0m
[31m [0m   [2m 45 [0m[2m│   │   │   │   │   [0m[96minput[0m=text.strip(),                                        [31m [0m
[31m────────────────────────────────────────────────────────────────────────────────────────[0m
[1;91mTypeError: [0m[1;35mSpeech.create[0m[1m([0m[1m)[0m got an unexpected keyword argument [32m'format'[0m

[3mDuring handling of the above exception, another exception occurred:[0m

[31m──[0m[31m────────────────────────[0m[31m [0m[1;31mTraceback [0m[1;2;31m(most recent call last)[0m[31m [0m[31m─────────────────────────[0m[31m──[0m
[31m [0m [2;33m/Users/ohseohyeon/anaconda3/lib/python3.11/site-packages/streamlit/runtime/scriptrun[0m [31m [0m
[31m [0m [2;33mner/[0m[1;33mexec_code.py[0m:[94m128[0m in [92mexec_func_with_error_handling[0m                                [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/Users/ohseohyeon/anaconda3/lib/python3.11/site-packages/streamlit/runtime/scriptrun[0m [31m [0m
[31m [0m [2;33mner/[0m[1;33mscript_runner.py[0m:[94m669[0m in [92mcode_to_exec[0m                                             [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/Users/ohseohyeon/OPIc_Buddy_front/app/[0m[1;33mmain.py[0m:[94m63[0m in [92m<module>[0m                        [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m60 [0m[2m│   │   [0mshow_intro()                                                            [31m [0m
[31m [0m   [2m61 [0m                                                                                [31m [0m
[31m [0m   [2m62 [0m[94mif[0m [91m__name__[0m == [33m"[0m[33m__main__[0m[33m"[0m:                                                      [31m [0m
[31m [0m [31m❱ [0m63 [2m│   [0m[1;4mmain()[0m                                                                      [31m [0m
[31m [0m   [2m64 [0m                                                                                [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/Users/ohseohyeon/OPIc_Buddy_front/app/[0m[1;33mmain.py[0m:[94m52[0m in [92mmain[0m                            [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m49 [0m[2m│   │   │   [0m[94mwith[0m st.spinner([33m"[0m[33mGenerating OPIc questions...[0m[33m"[0m):                    [31m [0m
[31m [0m   [2m50 [0m[2m│   │   │   │   [0mst.session_state[[33m"[0m[33mexam_questions[0m[33m"[0m] = asyncio.run(exam_mod.creat [31m [0m
[31m [0m   [2m51 [0m[2m│   │   [0m                                                                        [31m [0m
[31m [0m [31m❱ [0m52 [2m│   │   [0m[1;4mexam_mod.show_exam()[0m                                                    [31m [0m
[31m [0m   [2m53 [0m[2m│   [0m                                                                            [31m [0m
[31m [0m   [2m54 [0m[2m│   [0m[94melif[0m stage == [33m"[0m[33mfeedback[0m[33m"[0m:                                                   [31m [0m
[31m [0m   [2m55 [0m[2m│   │   [0m[94mfrom[0m [4;96mcomponents[0m[4;96m.[0m[4;96mfeedback[0m [94mimport[0m show_feedback_page                      [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/Users/ohseohyeon/OPIc_Buddy_front/app/components/[0m[1;33mexam.py[0m:[94m210[0m in [92mshow_exam[0m           [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m207 [0m[2m│   │   [0m[2m# 문제 인덱스가 바뀌면 항상 새로 TTS 생성 (캐시 사용 안함)[0m             [31m [0m
[31m [0m   [2m208 [0m[2m│   │   [0m[94mwith[0m st.spinner([33m"[0m[33m문제 음성 변환 중...[0m[33m"[0m):                               [31m [0m
[31m [0m   [2m209 [0m[2m│   │   │   [0mvoice_manager = VoiceManager()                                     [31m [0m
[31m [0m [31m❱ [0m210 [2m│   │   │   [0maudio_data = [1;4mvoice_manager.text_to_speech(current_question)[0m        [31m [0m
[31m [0m   [2m211 [0m[2m│   │   │   [0mst.session_state[[33m'[0m[33mtts_audio_cache[0m[33m'[0m][tts_key] = audio_data          [31m [0m
[31m [0m   [2m212 [0m[2m│   │   [0m                                                                       [31m [0m
[31m [0m   [2m213 [0m[2m│   │   [0m[94mif[0m audio_data:                                                         [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m [2;33m/Users/ohseohyeon/OPIc_Buddy_front/app/utils/[0m[1;33mvoice_utils.py[0m:[94m52[0m in [92mtext_to_speech[0m     [31m [0m
[31m [0m                                                                                      [31m [0m
[31m [0m   [2m 49 [0m[2m│   │   │   │   [0m[94mreturn[0m resp.read()                                             [31m [0m
[31m [0m   [2m 50 [0m[2m│   │   │   [0m[94mexcept[0m [96mException[0m [94mas[0m e2:                                            [31m [0m
[31m [0m   [2m 51 [0m[2m│   │   │   │   [0m[2m# 최종 에러를 자세히 올려 호출부에서 메시지 표시[0m               [31m [0m
[31m [0m [31m❱ [0m 52 [2m│   │   │   │   [0m[1;4;94mraise[0m[1;4m [0m[1;4;96mRuntimeError[0m[1;4m([0m[1;4;33mf[0m[1;4;33m"[0m[1;4;33mTTS failed: [0m[1;4;33m{[0m[1;4me1[0m[1;4;33m}[0m[1;4;33m | fallback: [0m[1;4;33m{[0m[1;4me2[0m[1;4;33m}[0m[1;4;33m"[0m[1;4m)[0m       [31m [0m
[31m [0m   [2m 53 [0m                                                                               [31m [0m
[31m [0m   [2m 54 [0m[2m# ── 음성/텍스트 통합 입력: 기존 인터페이스 유지용 더미[0m                        [31m [0m
[31m [0m   [2m 55 [0m[94mdef[0m [92munified_answer_input[0m(q_idx: [96mint[0m, question: [96mstr[0m) -> [96mstr[0m:                    [31m [0m
[31m────────────────────────────────────────────────────────────────────────────────────────[0m
[1;91mRuntimeError: [0mTTS failed: [1;35mSpeech.create[0m[1m([0m[1m)[0m got an unexpected keyword argument [32m'format'[0m | 
fallback: [1;35mSpeech.create[0m[1m([0m[1m)[0m got an unexpected keyword argument [32m'format'[0m
